(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){},16:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(8),l=a.n(i),r=(a(15),a(2)),s=a(3),c=a(5),u=a(4),m=a(6),d=a(1),h=(a(16),a(17),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={image:"",imagePreviewUrl:null,caption:""},a._handleImageChange=a._handleImageChange.bind(Object(d.a)(Object(d.a)(a))),a._handleSubmit=a._handleSubmit.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"_handleImageChange",value:function(e){var t=this;e.preventDefault();var a=e.target.files[0],n=new FileReader;n.onloadend=function(){return t.setState({imagePreviewUrl:n.result})},n.readAsDataURL(a),this.setState({image:a}),console.log("image",this.state.image)}},{key:"handleBlogChange",value:function(e){e.preventDefault(),this.setState({caption:e.target.value})}},{key:"_handleSubmit",value:function(e){e.preventDefault(),this.props.addPost(this.state)}},{key:"render",value:function(){var e=this;console.log(this.state.posts);var t=this.state.imagePreviewUrl,a=null;return a=t?o.a.createElement("img",{src:t,alt:"imagePreview"}):o.a.createElement("div",{className:"previewText"},"Please select an Image for Preview"),o.a.createElement("form",{onSubmit:this._handleSubmit,id:"uploadForm"},o.a.createElement("div",null,o.a.createElement("input",{className:"fileInput",type:"file",onChange:function(t){return e._handleImageChange(t)}}),o.a.createElement("br",null)),o.a.createElement("div",{id:"textAndButton"},o.a.createElement("input",{id:"blogText",name:"blog",type:"text",onChange:function(t){return e.handleBlogChange(t)},placeholder:"Trip details"}),o.a.createElement("br",null),o.a.createElement("button",{className:"submitButton",type:"submit"},"Upload Image")),o.a.createElement("div",{className:"imgPreview"},a),o.a.createElement("div",null,o.a.createElement("p",null,this.state.caption)))}}]),t}(n.Component)),p=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={posts:[]},a.addPost=a.addPost.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/images/").then(function(e){return e.json()}).then(function(t){e.setState({posts:t}),console.log("working",t),console.log("post worked")})}},{key:"addPost",value:function(e){var t=this,a=new FormData;a.append("image",e.image),a.append("caption",e.caption),fetch("/api/images/",{method:"POST",body:a}).then(function(e){return e.json()}).then(function(e){var a=t.state.posts;a.push(e),t.setState({posts:a}),console.log("working",e),console.log("post worked")})}},{key:"render",value:function(){var e=this.state.posts.map(function(e){return console.log(e),o.a.createElement("div",{key:e.id},o.a.createElement("p",null,e.caption))});return o.a.createElement("div",{className:"App"},o.a.createElement(h,{addPost:this.addPost}),e)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(p,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t,a){e.exports=a(18)}},[[9,1,2]]]);
//# sourceMappingURL=main.2c3317c4.chunk.js.map